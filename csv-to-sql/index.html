<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        textarea {
            width: 100%;
            height: 200px;
        }

        input[type="file"] {
            margin-bottom: 20px;
        }
    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            html, body {
                background-color: #181a1b;
                color: #e8e6e3;
                color-scheme: dark; /* native form controls & scrollbars */
            }

            body {
                /* keep your margin but add a dark bg */
                margin: 20px;
            }

            h1, h2 {
                color: #e8e6e3;
            }

            textarea {
                background-color: #111416;
                color: #e8e6e3;
                border: 1px solid #545b5e;
            }

            input[type="file"] {
                color: #e8e6e3;
            }

            button {
                background-color: #2563eb;
                color: #ffffff;
                border: none;
                padding: 6px 12px;
                border-radius: 4px;
                cursor: pointer;
            }

                button:hover {
                    background-color: #1d4ed8;
                }
        }
    </style>

</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <h1>CSV to SQL Insert Generator</h1>
    <input type="file" id="csvFileInput" accept=".csv">
    <button onclick="generateSQL()">Generate SQL</button>

    <h2>SQL Insert Queries</h2>
<textarea id="sqlOutput" readonly=""></textarea>
    <script>
    function generateSQL() {
            const fileInput = document.getElementById('csvFileInput');
            if (!fileInput.files.length) {
                alert("Please choose a CSV file first.");
                return;
            }

            const file = fileInput.files[0];
            Papa.parse(file, {
                header: true,
                complete: function (results) {
                    const data = results.data;
                    const tableName = "local_page_rollout"; // Change table name if needed
                    const columns = Object.keys(data[0]);
                    let sqlQueries = `INSERT INTO ${tableName} (${columns.join(", ")}) VALUES\n`;

                    const values = data.map(row => {
                        const rowValues = columns.map(col => {
                            const value = row[col];
                            if (value === undefined || value === null || value === "") {
                                return "NULL";
                            } else if (typeof value === 'string') {
                                return `'${value.replace(/'/g, "''")}'`;
                            } else {
                                return value;
                            }
                        });
                        return `(${rowValues.join(", ")})`;
                    });

                    sqlQueries += values.join(",\n") + ";";
                    document.getElementById('sqlOutput').textContent = sqlQueries;
                }
            });
        }</script>

</body>
</html>