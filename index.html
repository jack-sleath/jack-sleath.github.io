<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jack Sleath - Projects</title>
    <meta name="description" content="A filterable, tile-based portfolio page to showcase projects by language, skills, and type." />
    <style>
        :root {
            --bg: #0b0d10;
            --surface: #12161b;
            --surface-2: #181d23;
            --text: #e8edf2;
            --muted: #9aa7b2;
            --brand: #7c5cff;
            --ring: #7c5cff55;
            --ok: #22c55e;
            --warn: #f59e0b;
            --err: #ef4444;
            --shadow: 0 10px 30px rgba(0,0,0,.35);
            --radius-xl: 18px;
            --radius-lg: 14px;
            --radius-md: 10px;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f6f7fb;
                --surface: #ffffff;
                --surface-2: #f0f3f7;
                --text: #14181f;
                --muted: #4b5563;
                --shadow: 0 10px 30px rgba(17,24,39,.08);
            }
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--text);
            background: radial-gradient(1200px 600px at 10% -10%, #22283a44, transparent), var(--bg);
        }

        /* Inline text link — use for <a> inside copy */
        .text-link {
            color: inherit;
            text-decoration: underline;
            text-decoration-color: #3a4658; /* subtle in dark; overridden by system light mode vars */
            text-decoration-thickness: .08em;
            text-underline-offset: 3px;
            border-radius: 6px; /* for focus ring rounding */
            outline: none;
            transition: color .15s ease, text-decoration-color .15s ease, box-shadow .2s ease;
        }

        .text-link:hover {
            color: var(--brand);
            text-decoration-color: var(--brand);
        }

        .text-link:focus-visible {
            box-shadow: 0 0 0 4px var(--ring);
        }

        /* Optional: a “muted” variant for low-emphasis links in meta text */
        .text-link.muted {
            color: var(--muted);
            text-decoration-color: currentColor;
        }

        /* Optional: external icon affordance */
        .text-link.external::after {
            content: "↗";
            font-size: .85em;
            margin-left: .25em;
            opacity: .8;
        }


        .wrap {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }

        header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 16px;
            margin-bottom: 18px;
        }

        .title {
            font-size: clamp(22px, 3vw, 34px);
            font-weight: 800;
            letter-spacing: .3px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

            .title .dot {
                display: inline-block;
                width: 10px;
                height: 10px;
                border-radius: 999px;
                background: var(--brand);
                box-shadow: 0 0 0 6px var(--ring);
            }

        .toolbar {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
        }

        .search {
            position: relative;
            flex: 1 1 260px;
        }

            .search input {
                width: 100%;
                padding: 12px 40px 12px 42px;
                border-radius: var(--radius-lg);
                border: 1px solid transparent;
                background: var(--surface);
                color: var(--text);
                outline: none;
                box-shadow: var(--shadow);
            }

                .search input:focus {
                    border-color: var(--brand);
                    box-shadow: 0 0 0 4px var(--ring), var(--shadow);
                }

            .search svg {
                position: absolute;
                left: 12px;
                top: 50%;
                transform: translateY(-50%);
                opacity: .8;
                width: 18px;
                height: 18px;
            }

        .actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            appearance: none;
            border: 1px solid #2a3240;
            color: var(--text);
            background: linear-gradient(180deg, var(--surface), var(--surface-2));
            padding: 10px 14px;
            border-radius: var(--radius-md);
            cursor: pointer;
            box-shadow: var(--shadow);
            font-weight: 600;
        }

            .btn:hover {
                border-color: #3a4658
            }

            .btn.ghost {
                background: transparent;
                border-color: #3a4658
            }

        /* Collapsible (details/summary) styling */
        details.collapsible {
            border: 1px solid #2a3240;
            border-radius: var(--radius-xl);
            background: linear-gradient(180deg, var(--surface), var(--surface-2));
            box-shadow: var(--shadow);
            margin: 12px 0 20px;
            overflow: clip;
        }

            details.collapsible > summary {
                list-style: none;
                cursor: pointer;
                user-select: none;
                padding: 14px 16px;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 800;
                letter-spacing: .2px;
            }

                details.collapsible > summary::-webkit-details-marker {
                    display: none;
                }

        .caret {
            width: 10px;
            height: 10px;
            border-right: 2px solid currentColor;
            border-bottom: 2px solid currentColor;
            transform: rotate(-45deg);
            transition: transform .18s ease;
            opacity: .8;
        }

        details[open] > summary .caret {
            transform: rotate(45deg);
        }

        .summary-meta {
            margin-left: auto;
            display: inline-flex;
            gap: 8px;
            align-items: center;
            font-weight: 700;
            color: var(--muted);
        }

        .pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid #2a3240;
            background: #0f1318;
            font-size: 12px;
            font-weight: 800;
        }

        /* Collapsible content wrapper for subtle reveal */
        .collapsible-content {
            padding: 0 16px 16px;
        }

        /* Filters */
        .filters {
            margin: 6px 0 0;
            display: grid;
            gap: 14px;
            grid-template-columns: 1fr;
        }

        .group {
            background: linear-gradient(180deg, var(--surface), var(--surface-2));
            border: 1px solid #2a3240;
            border-radius: var(--radius-xl);
            padding: 14px;
            box-shadow: var(--shadow);
        }

            .group h3 {
                margin: 0 0 10px;
                font-size: 14px;
                text-transform: uppercase;
                letter-spacing: .12em;
                color: var(--muted);
            }

        .chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .chip {
            border: 1px solid #2a3240;
            background: #0f1318;
            color: var(--text);
            padding: 7px 12px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
        }

            .chip[aria-pressed="true"] {
                border-color: var(--brand);
                box-shadow: 0 0 0 4px var(--ring);
                background: #11152d;
            }

        @media (min-width: 880px) {
            .filters {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Grid */
        .grid {
            display: grid;
            gap: 16px;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        }

        .tile {
            position: relative;
            border-radius: var(--radius-xl);
            overflow: hidden;
            background: linear-gradient(180deg, var(--surface), var(--surface-2));
            border: 1px solid #2a3240;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
        }

        .thumb {
            aspect-ratio: 16/9;
            background: #1a2030;
            display: grid;
            place-items: center;
        }

            .thumb svg {
                width: 44px;
                height: 44px;
                opacity: .9
            }

        .tile-inner {
            padding: 14px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tile h4 {
            margin: 0;
            font-size: 18px;
        }

        .desc {
            color: var(--muted);
            line-height: 1.45;
        }

        .badges {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .badge {
            font-size: 12px;
            font-weight: 700;
            padding: 6px 10px;
            border-radius: 999px;
            background: #0f1318;
            border: 1px solid #2a3240;
        }

        .links {
            display: flex;
            gap: 8px;
            margin-top: 6px;
        }

        .link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            border-radius: var(--radius-md);
            background: #0f1318;
            border: 1px solid #2a3240;
            text-decoration: none;
            color: var(--text);
            font-weight: 700;
        }

            .link:hover {
                border-color: #3a4658
            }

        /* People / Co-authors */
        .people {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }

        .person {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            border-radius: 999px;
            background: #0f1318;
            border: 1px solid #2a3240;
            text-decoration: none;
            color: var(--text);
            font-weight: 700;
            font-size: 12px;
        }

            .person:hover {
                border-color: #3a4658
            }

        .avatar {
            width: 20px;
            height: 20px;
            border-radius: 999px;
            background: #1f2937;
            display: grid;
            place-items: center;
            font-size: 11px;
            font-weight: 900;
        }

        .empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--muted);
        }

        footer {
            margin: 24px 0;
            color: var(--muted);
            font-size: 14px;
            text-align: center;
        }

        /* Reduce motion */
        @media (prefers-reduced-motion: no-preference) {
            .tile {
                transition: transform .15s ease, box-shadow .2s ease;
            }

                .tile:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 18px 40px rgba(0,0,0,.45);
                }
        }
    </style>
</head>
<body>
    <!--
      HOW TO USE
      1) Edit the PROJECTS array via projects.json.
      2) Update the ABOUT ME content in the <details id="about"> section below.
      3) Filters panel is now collapsible and shows a count of selected chips.
    -->
    <div class="wrap">
        <header>
            <div class="title" role="heading" aria-level="1"><span class="dot"></span> Jack Sleath - Projects</div>
            <div class="toolbar" role="region" aria-label="Search and global actions">
                <div class="search">
                    <svg aria-hidden="true" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.2-4.2" stroke="currentColor" stroke-width="2" stroke-linecap="round" /><circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" /></svg>
                    <input id="q" type="search" placeholder="Search projects, descriptions, tags…" aria-label="Search projects" />
                </div>
                <div class="actions">
                    <button class="btn" id="btn-clear">Clear filters</button>
                    <button class="btn ghost" id="btn-copy">Copy shareable filter URL</button>
                </div>
            </div>
        </header>

        <!-- ABOUT ME (collapsible) -->
        <details class="collapsible" id="about">
            <summary>
                <span class="caret" aria-hidden="true"></span>
                <span>About Jack</span>
            </summary>
            <div class="collapsible-content">
                <div class="group" style="margin-top:8px;">
                    <h3 style="text-transform:none; letter-spacing:0; font-size:16px; color:var(--text); margin:0 0 8px;">Hi, I’m Jack 👋</h3>
                    <p class="desc" style="margin:0 0 12px;">
                        I’m a full stack developer who believes in <a href="https://www.joelonsoftware.com/2009/09/23/the-duct-tape-programmer/" target="_blank">duct tape development</a>, quick fixes that make life easier, but I also love building polished systems when it counts. Between teaching kids code and game design at Impact Academies and leading projects like subscription microservices and smarter product search at COOK, I’m always chasing that balance between practical and creative. I write down every idea I get, because you never know which one’ll turn into something worth building.
                    </p>
                    <!--<div class="badges" aria-label="High‑level skills">
                        <span class="badge">Full‑stack</span>
                        <span class="badge">.NET</span>
                        <span class="badge">React</span>
                        <span class="badge">TypeScript</span>
                        <span class="badge">Azure</span>
                    </div>-->
                    <div class="links" style="margin-top:12px;">
                        <a class="link" href="mailto:jackwilliamsleath@gmail.com" aria-label="Email Jack">📧 Email</a>
                        <a class="link" href="https://github.com/jack-sleath" target="_blank" aria-label="Jack on GitHub">🐙 GitHub</a>
                        <a class="link" href="https://www.linkedin.com/in/jack-sleath/" target="_blank" aria-label="Jack on LinkedIn">💼 LinkedIn</a>
                    </div>
                </div>
            </div>
        </details>

        <!-- Filters (collapsible) -->
        <details class="collapsible" id="filters-panel" open>
            <summary>
                <span class="caret" aria-hidden="true"></span>
                <span>Filters</span>
                <span class="summary-meta">
                    <span class="pill" id="pill-count" aria-live="polite">0 selected</span>
                </span>
            </summary>
            <div class="collapsible-content">
                <section class="filters" role="region" aria-label="Filters">
                    <div class="group" data-group="languages">
                        <h3>Languages</h3>
                        <div class="chips" id="chips-languages"></div>
                    </div>
                    <div class="group" data-group="skills">
                        <h3>Skills</h3>
                        <div class="chips" id="chips-skills"></div>
                    </div>
                    <div class="group" data-group="types">
                        <h3>Type</h3>
                        <div class="chips" id="chips-types"></div>
                    </div>
                </section>
            </div>
        </details>

        <!-- Grid -->
        <main>
            <div id="grid" class="grid" aria-live="polite"></div>
            <div id="empty" class="empty" hidden>No projects match your filters. Try clearing some chips or the search.</div>
        </main>

        <footer>
            <p>Keyboard tip: press <kbd>/</kbd> to focus search, <kbd>Esc</kbd> to clear. <kbd>Enter</kbd> toggles collapsibles when focused.</p>
        </footer>
    </div>

    <script>
        // --- CONFIG -----------------------------------------------------------------
        const FILTERS = {
            languages: ["JavaScript", "TypeScript", "C#", "Python", "HTML", "CSS", "SQL", "Photoshop"],
            skills: ["Frontend", "Backend", "Full-stack", "API", "Database", "DevOps", "CI/CD", "Testing", "AI/ML"],
            types: ["Open Source", "Personal", "Hackathon", "Academic", "Duct-Tape Utility", "Silly", "Quick Idea", "Historic"]
        };

        let PROJECTS = [];
        fetch('./projects.json')
            .then(response => response.json())
            .then(data => { PROJECTS = data; renderGrid(); updateFilterSummary(); });

        // --- STATE ------------------------------------------------------------------
        const params = new URLSearchParams(location.search);
        const state = {
            q: params.get('q') || "",
            selected: {
                languages: new Set((params.get('langs') || "").split(',').filter(Boolean)),
                skills: new Set((params.get('skills') || "").split(',').filter(Boolean)),
                types: new Set((params.get('types') || "").split(',').filter(Boolean)),
            }
        };

        // --- HELPERS ----------------------------------------------------------------
        const $ = sel => document.querySelector(sel);
        const $$ = sel => Array.from(document.querySelectorAll(sel));

        function badge(text) {
            const b = document.createElement('span');
            b.className = 'badge'; b.textContent = text; return b;
        }
        function makeIconPath() {
            const ns = 'http://www.w3.org/2000/svg';
            const svg = document.createElementNS(ns, 'svg');
            svg.setAttribute('viewBox', '0 0 24 24'); svg.setAttribute('fill', 'none');
            svg.innerHTML = '<path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />';
            return svg;
        }

        function renderChips(group, containerId) {
            const root = document.getElementById(containerId);
            root.innerHTML = '';
            FILTERS[group].forEach(val => {
                const btn = document.createElement('button');
                btn.className = 'chip'; btn.type = 'button'; btn.setAttribute('role', 'button');
                btn.setAttribute('aria-pressed', String(state.selected[group].has(val)));
                btn.dataset.group = group; btn.dataset.value = val; btn.textContent = val;
                btn.addEventListener('click', () => {
                    const sel = state.selected[group];
                    if (sel.has(val)) sel.delete(val); else sel.add(val);
                    btn.setAttribute('aria-pressed', String(sel.has(val)));
                    syncURL();
                    render();
                });
                root.appendChild(btn);
            });
        }

        function projectMatches(p) {
            const q = state.q.trim().toLowerCase();
            const names = (p.coauthors || []).map(c => [c.name, c.role].filter(Boolean).join(' ')).join(' ');
            const textHit = !q || [p.title, p.description, names, ...p.languages, ...p.skills, ...p.types]
                .join(' ')
                .toLowerCase()
                .includes(q);

            const groupHit = ['languages', 'skills', 'types'].every(g => {
                const sel = state.selected[g];
                if (!sel.size) return true; // empty group ignored
                const values = new Set(p[g]);
                return Array.from(sel).some(v => values.has(v)); // OR within group
            });
            return textHit && groupHit;
        }

        function renderGrid() {
            const grid = $('#grid');
            grid.innerHTML = '';
            const filtered = PROJECTS.filter(projectMatches);
            $('#empty').hidden = filtered.length > 0;
            filtered.forEach(p => {
                const card = document.createElement('article');
                card.className = 'tile'; card.tabIndex = 0; card.setAttribute('aria-label', p.title);

                const th = document.createElement('div'); th.className = 'thumb';
                if (p.thumb) { th.textContent = p.thumb; th.style.fontSize = '40px'; } else { th.appendChild(makeIconPath()); }
                card.appendChild(th);

                const inner = document.createElement('div'); inner.className = 'tile-inner';

                const h4 = document.createElement('h4'); h4.textContent = p.title; inner.appendChild(h4);

                const desc = document.createElement('p'); desc.className = 'desc'; desc.textContent = p.description; inner.appendChild(desc);

                const badgeWrap = document.createElement('div'); badgeWrap.className = 'badges';
                p.languages.forEach(l => badgeWrap.appendChild(badge(l)));
                p.skills.forEach(s => badgeWrap.appendChild(badge(s)));
                p.types.forEach(t => badgeWrap.appendChild(badge(t)));
                inner.appendChild(badgeWrap);

                if (Array.isArray(p.coauthors) && p.coauthors.length) {
                    const people = document.createElement('div'); people.className = 'people';
                    p.coauthors.forEach(c => {
                        const el = document.createElement(c.url ? 'a' : 'span');
                        if (c.url) { el.href = c.url; el.target = '_blank'; el.rel = 'noopener noreferrer'; }
                        el.className = 'person';
                        const av = document.createElement('span'); av.className = 'avatar';
                        const initials = (c.initials || (c.name || '').split(' ').map(w => w[0]).join('').slice(0, 2) || '?').toUpperCase();
                        av.textContent = initials;
                        const label = document.createElement('span'); label.textContent = c.role ? `${c.name} - ${c.role}` : c.name;
                        el.appendChild(av); el.appendChild(label); people.appendChild(el);
                    });
                    inner.appendChild(people);
                }

                const links = document.createElement('div'); links.className = 'links';
                if (p.links?.demo) links.appendChild(linkBtn(p.links.demo, 'Try it out'));
                if (p.links?.video) links.appendChild(linkBtn(p.links.video, 'Video'));
                if (p.links?.repo) links.appendChild(linkBtn(p.links.repo, 'Source'));
                if (p.links?.documentation) links.appendChild(linkBtn(p.links.documentation, 'Documentation'));
                inner.appendChild(links);

                card.appendChild(inner); grid.appendChild(card);
            });
        }

        function linkBtn(href, label) {
            const a = document.createElement('a'); a.href = href; a.target = '_blank'; a.rel = 'noopener noreferrer';
            a.className = 'link';
            a.innerHTML = `<svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M14 3h7v7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M21 3 10 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><rect x="3" y="10" width="8" height="11" rx="2" stroke="currentColor" stroke-width="2"/></svg> ${label}`;
            return a;
        }

        function render() { renderGrid(); updateFilterSummary(); }

        function renderAllChips() {
            renderChips('languages', 'chips-languages');
            renderChips('skills', 'chips-skills');
            renderChips('types', 'chips-types');
        }

        function syncURL(push = true) {
            const params = new URLSearchParams();
            if (state.q) params.set('q', state.q);
            const langs = Array.from(state.selected.languages).join(','); if (langs) params.set('langs', langs);
            const skills = Array.from(state.selected.skills).join(','); if (skills) params.set('skills', skills);
            const types = Array.from(state.selected.types).join(','); if (types) params.set('types', types);
            const newURL = `${location.pathname}${params.toString() ? '?' + params.toString() : ''}`;
            if (push) history.replaceState(null, '', newURL);
        }

        function clearFilters() {
            state.q = '';
            ['languages', 'skills', 'types'].forEach(g => state.selected[g].clear());
            $('#q').value = '';
            renderAllChips();
            syncURL();
            render();
        }

        // --- Collapsible helpers ----------------------------------------------------
        const ABOUT_KEY = 'aboutOpen';
        const FILTERS_KEY = 'filtersOpen';
        function restoreOpenStates() {
            const about = $('#about');
            const filters = $('#filters-panel');
            const aboutOpen = localStorage.getItem(ABOUT_KEY);
            const filtersOpen = localStorage.getItem(FILTERS_KEY);
            if (aboutOpen !== null) about.open = aboutOpen === 'true';
            if (filtersOpen !== null) filters.open = filtersOpen === 'true';
        }
        function wireOpenStatePersistence() {
            $('#about').addEventListener('toggle', () => localStorage.setItem(ABOUT_KEY, String($('#about').open)));
            $('#filters-panel').addEventListener('toggle', () => localStorage.setItem(FILTERS_KEY, String($('#filters-panel').open)));
        }
        function updateFilterSummary() {
            const count = state.selected.languages.size + state.selected.skills.size + state.selected.types.size;
            const pill = $('#pill-count'); if (!pill) return;
            pill.textContent = `${count} selected`;
        }

        // --- INIT -------------------------------------------------------------------
        document.addEventListener('DOMContentLoaded', () => {
            restoreOpenStates();
            wireOpenStatePersistence();

            // Hydrate chips
            renderAllChips();

            // Search input
            const q = $('#q');
            q.value = state.q || '';
            q.addEventListener('input', () => { state.q = q.value; syncURL(); render(); });
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.key === '/' && document.activeElement !== q) { e.preventDefault(); q.focus(); }
                if (e.key === 'Escape' && q.value) { q.value = ''; state.q = ''; syncURL(); render(); }
            });

            // Buttons
            $('#btn-clear').addEventListener('click', clearFilters);
            $('#btn-copy').addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(location.href);
                    toast('Filter URL copied to clipboard');
                } catch { toast('Could not copy - select the URL in your address bar'); }
            });

            render();
        });

        // --- Tiny toast -------------------------------------------------------------
        function toast(msg) {
            const t = document.createElement('div');
            t.textContent = msg;
            t.style.position = 'fixed'; t.style.left = '50%'; t.style.bottom = '30px';
            t.style.transform = 'translateX(-50%)'; t.style.background = 'rgba(17,24,39,.9)';
            t.style.color = 'white'; t.style.padding = '10px 14px'; t.style.borderRadius = '999px';
            t.style.border = '1px solid #374151'; t.style.boxShadow = 'var(--shadow)'; t.style.zIndex = '9999';
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 1800);
        }
    </script>
</body>
</html>
